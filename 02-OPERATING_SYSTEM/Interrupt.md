# Interrupt(μΈν„°λ½νΈ)

## π’΅ μΈν„°λ½νΈκ°€ λ¬΄μ—‡μΈμ§€ μ„¤λ…ν•΄ μ£Όμ„Έμ”.

**CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•,** μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ λ“±μ μ¥μΉλ‚ μμ™Έμƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν•  κ²½μ°μ— **λ§μ΄ν¬λ΅ μ¤νΌλ μ΄μ…**κΉμ§€ μ²λ¦¬ ν›„ **λ§μ΄ν¬λ΅ ν”„λ΅μ„Έμ„(CPU)** μ—κ² μ•λ ¤ μ²λ¦¬ ν•  μ μλ„λ΅ ν•λ” κ²ƒ μ…λ‹λ‹¤.

</br>

## π“‘ κΌ¬λ¦¬μ§λ¬Έ
### μΈν„°λ½νΈλ” μ–΄λ–»κ² μ²λ¦¬ν•λ‚μ”?

<p align="center"><img src="./images/interrupt1.png" height="400" width="500px"></p>

1. ν„μ¬ μ§„ν–‰ μ¤‘μΈ μ‘μ—…μ„ λ§λ¬΄λ¦¬ν•©λ‹λ‹¤. μ‹¤ν–‰ μ¤‘μΈ λ…λ Ήμ–΄ μ‚¬μ΄ν΄μ„ μ™„λ£ν•κ³ , λ‹¤μ λ…λ Ήμ–΄λ¥Ό κ°€μ Έμ¤κΈ° μ„ν•΄ CPUλ” μ μ‹ μ‰¬κ² λ©λ‹λ‹¤.

2. CPUλ” μ¤‘μ”ν• μ‘μ—…μ„ μν–‰ μ¤‘μ΄μ§€λ§, ν•μ΄λ΅ μΈν„°λ½νΈ λ§μ¤ν¬ λΉ„νΈλ¥Ό ν™•μΈν•©λ‹λ‹¤. μ΄ λΉ„νΈκ°€ μ„¤μ •λμ–΄ μλ‹¤λ©΄, μΈν„°λ½νΈλ¥Ό λ¬΄μ‹ν•κ³  κ³„μ† μ‘μ—…μ„ μ§„ν–‰ν•©λ‹λ‹¤.

3. λ°μƒν• μΈν„°λ½νΈμ μΆ…λ¥λ¥Ό ν™•μΈν•©λ‹λ‹¤. μ–΄λ–¤ μ‚¬κ±΄μ΄ λ°μƒν–λ”μ§€λ¥Ό μ•μ•„λ³΄κΈ° μ„ν•΄ μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ°Έμ΅°ν•©λ‹λ‹¤.

4. κ·Έ λ‹¤μ, ν•΄λ‹Ή μΈν„°λ½νΈμ— λ€μ‘ν•λ” **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ \(ISR, μΈν„°λ½νΈ ν•Έλ“¤λ¬\)** μ μ£Όμ†λ¥Ό μ°Ύμµλ‹λ‹¤.

5. CPUλ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μΌλ΅ μ΄λ™ν•©λ‹λ‹¤. μ΄ λ•, ν„μ¬ μ‹¤ν–‰ μ¤‘μ΄λ ν”„λ΅κ·Έλ¨μ μ„μΉλ¥Ό μ μ‹ μ €μ¥ν•©λ‹λ‹¤.

6. ν„μ¬ μ§„ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨μ λ μ§€μ¤ν„° κ°’μ„ λ°±μ—…ν•©λ‹λ‹¤. μ΄λ ‡κ² ν•μ—¬, μΈν„°λ½νΈ μ²λ¦¬ λ„μ¤‘μ—λ„ μ¤‘μ”ν• λ°μ΄ν„°λ¥Ό λ³΄νΈν•  μ μμµλ‹λ‹¤.

7. μ΄μ  ν•΄λ‹Ή μΈν„°λ½νΈμ— λ€μ‘ν•λ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•©λ‹λ‹¤. μ΄ λ£¨ν‹΄μ€ μΈν„°λ½νΈκ°€ λ°μƒν• μ›μΈμ„ μ²λ¦¬ν•κ³  ν•„μ”ν• μ‘μ—…μ„ μν–‰ν•©λ‹λ‹¤.

8. μΈν„°λ½νΈ μ²λ¦¬κ°€ μ™„λ£λλ©΄, λ°±μ—…ν• λ μ§€μ¤ν„° κ°’μ„ λ³µμ›ν•©λ‹λ‹¤. κ·Έλ¬λ©΄ ν„μ¬ μ‹¤ν–‰ μ¤‘μ΄μ—λ ν”„λ΅κ·Έλ¨μ„ μ΄μ–΄μ„ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.

9. μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ λμ— λ„λ‹¬ν•λ©΄, **IRET λ…λ Ήμ–΄**λ¥Ό μ‚¬μ©ν•μ—¬ μΈν„°λ½νΈλ¥Ό ν•΄μ ν•κ³  μ›λμ μ‹¤ν–‰ μ„μΉλ΅ λ³µκ·€ν•©λ‹λ‹¤.

10. IRET λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ©΄, λ°±μ—…ν•΄ λ‘” **ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° (PC) κ°’**μ„ λ³µμ›ν•μ—¬ μ΄μ „μ— μ‹¤ν–‰ μ¤‘μ΄μ—λ μ„μΉλ΅ λ‹¤μ‹ λμ•„κ°‘λ‹λ‹¤.

</br>

### Polling λ°©μ‹μ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ„Έμ”.

**μ»΄ν“¨ν„° μ‹μ¤ν…μ—μ„ μ™Έλ¶€ μ΄λ²¤νΈλ¥Ό κ°μ§€ν•κ³  μ²λ¦¬ν•λ” μ ‘κ·Όλ°©μ‹**

- ν΄λ§ λ°©μ‹μ€ ν”„λ΅μ„Έμ„κ°€ **μ£ΌκΈ°μ μΌλ΅ νΉμ€ μ •κΈ°μ μΌλ΅** μ™Έλ¶€ μ¥μΉλ‚ μƒνƒλ¥Ό κ³„μ† ν™•μΈν•μ—¬ μ–΄λ–¤ λ™μ‘μ„ μν–‰ν•λ” λ°©μ‹μ…λ‹λ‹¤.
- ν”„λ΅μ„Έμ„κ°€ μ§μ ‘ ν™•μΈν•κΈ° λ•λ¬Έμ— μ™Έλ¶€ μ΄λ²¤νΈκ°€ λ°μƒν•μ§€ μ•λ”λΌλ„ **μ§€μ†μ μΌλ΅ μ‹μ¤ν… μμ›μ„ μ†λΉ„**ν•κ² λ©λ‹λ‹¤.
- μλ¥Ό λ“¤μ–΄, ν‚¤λ³΄λ“ μ…λ ¥μ„ ν΄λ§ν•λ” κ²½μ°, ν”„λ΅μ„Έμ„κ°€ κ³„μ†ν•΄μ„ ν‚¤λ³΄λ“ μƒνƒλ¥Ό ν™•μΈν•μ—¬ ν‚¤ μ…λ ¥μ„ μ²λ¦¬ν•©λ‹λ‹¤.

**Polling λ°©μ‹ vs μΈν„°λ½νΈ λ°©μ‹**

- ν΄λ§ : μ΄λ²¤νΈλ¥Ό μν–‰ν•λΌλ” **μ‹ νΈλ¥Ό λ°›μ•λ”μ§€ μ• λ°›μ•λ”μ§€λ¥Ό μ£ΌκΈ°μ μΌλ΅ κ²€μ‚¬**ν•λ©΄μ„ κ·Έ μ‹ νΈλ¥Ό λ°›μ•μ„ λ€ μ΄λ²¤νΈλ¥Ό μ‹¤ν–‰ν•λ” λ°©μ‹μ…λ‹λ‹¤.
  - κµ¬ν„μ΄ μ‰½λ‹¤λ” μ¥μ κ³Ό λ°μ‘μ‹κ°„μ΄ λλ¦¬κ³  λ¦¬μ†μ¤λ¥Ό λ§μ΄ μ°¨μ§€ν•λ‹¤λ” λ‹¨μ μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.
- μΈν„°λ½νΈ : **μ΄λ²¤νΈλ¥Ό μν–‰ν•λΌλ” μ‹ νΈλ¥Ό λ°›μΌλ©΄** ν•Έλ“¤λ¬λ¥Ό ν†µν•΄μ„ λ°”λ΅ μ΄λ²¤νΈλ¥Ό μν–‰ν•λ” λ°©μ‹μ…λ‹λ‹¤.

  - μΈν„°λ½νΈλ” μ •ν™•ν• νƒ€μ΄λ°, μ§§μ€ λ°μ‘μ‹κ°„μ μ¥μ κ³Ό ν•Έλ“¤λ¬λ¥Ό ν†µν•΄μ•Όν•κΈ° λ•λ¬Έμ— κµ¬ν„μƒμ λ‹¨μ μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.
 
</br>

### HW/SW μΈν„°λ½νΈμ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ„Έμ”.

- HW(ν•λ“μ›¨μ–΄) μΈν„°λ½νΈ

  - ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” **μ™Έλ¶€ ν•λ“μ›¨μ–΄ μ¥μΉλ‚ μƒνƒ**μ—μ„ λ°μƒν•λ” μ΄λ²¤νΈλ΅, μ£Όλ΅ μ‹μ¤ν…μ λ¬Όλ¦¬μ μΈ λ³€ν™”λ‚ μ…λ ¥ μ‹ νΈλ΅ μΈν•΄ λ°μƒν•λ‹¤.
  - μλ¥Ό λ“¤μ–΄, **ν‚¤λ³΄λ“λ‚ λ§μ°μ¤μ λ²„νΌ ν΄λ¦­**, **νƒ€μ΄λ¨Έ** λ“±μ ν•λ“μ›¨μ–΄ μ¥μΉμ—μ„ λ°μƒν•λ” μ΄λ²¤νΈκ°€ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ΅ κ°„μ£Όλλ‹¤.

- SW(μ†ν”„νΈμ›¨μ–΄) μΈν„°λ½νΈ

  - μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ” ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘μ— **λ…μ‹μ μΌλ΅ μ†ν”„νΈμ›¨μ–΄μ μΌλ΅ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈ**λ΅, μ£Όλ΅ **μ‹μ¤ν… μ„λΉ„μ¤λ¥Ό νΈμ¶**ν•κ±°λ‚ **μμ™Έ μƒν™©μ„ μ²λ¦¬**ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.
  - μ‹μ¤ν… μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ” κ²½μ°, **μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ μ κΈ°λ¥μ„ ν™μ©**ν•κΈ° μ„ν•΄ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚µλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ **νμΌ μ…μ¶λ ¥**, **λ©”λ¨λ¦¬ κ΄€λ¦¬**, **ν”„λ΅μ„Έμ¤ κ΄€λ¦¬** λ“±μ μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.
  - μμ™Έ μƒν™©μ„ μ²λ¦¬ν•λ” κ²½μ°, μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•μ—¬ **μμ™Έ ν•Έλ“¤λ¬λ¥Ό νΈμ¶**ν•μ—¬ μ¤λ¥λ‚ μμ™Έ μƒν™©μ„ μ²λ¦¬ν•λ‹¤.
  - μμ‹λ΅λ” ZeroDivisionException, System Call λ“±μ΄ μμµλ‹λ‹¤.

</br>

## π κΌ¬κΌ¬λ¬΄
### μΈν„°λ½νΈμ™€ μ‹μ¤ν… μ½ μ²λ¦¬ μμ  : File Read

<p align="center"><img src="./images/interrupt2.png" height="400" width="500px"></p>

- μ‹μ¤ν… μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ” κ²½μ°, **μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ μ κΈ°λ¥μ„ ν™μ©**ν•κΈ° μ„ν•΄ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚µλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ **νμΌ μ…μ¶λ ¥**, **λ©”λ¨λ¦¬ κ΄€λ¦¬**, **ν”„λ΅μ„Έμ¤ κ΄€λ¦¬** λ“±μ μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.

### κ°€μ • : Running Thread1(t1) κ³Ό Ready Thread2(t2)κ°€ μκ³ , Single Coreμ—μ„ λ™μ‘ν•  λ•

<p align="center"><img src="./images/interrupt3.png" height="400"></p>

- νμΌμ„ μ½κΈ° μ„ν•΄μ„λ” μ‹μ¤ν… νΈμ¶μΈ `read`λ¥Ό νΈμ¶ν•©λ‹λ‹¤.
  - μ»¤λ„ λ¨λ“λ΅ μ§„μ…ν•κ² λ©λ‹λ‹¤.
  - CPUμ ν„μ¬ μƒνƒλ¥Ό μ €μ¥ν•©λ‹λ‹¤.
  - νμΌμ„ μ½μ„ μ¤€λΉ„λ¥Ό μ„ν•΄ SSDμ™€ μ†ν†µν•©λ‹λ‹¤.
    - `read` μ‹μ¤ν… νΈμ¶μ€ λΈ”λ΅ μ‹μ¤ν… νΈμ¶μ΄λ―€λ΅, νμΌμ„ μ½μ„ μ¤€λΉ„κ°€ μ™„λ£λ  λ•κΉμ§€ κΈ°λ‹¤λ ¤μ•Ό ν•©λ‹λ‹¤. λ”°λΌμ„ ν•΄λ‹Ή μ‘μ—…μ„ κΈ°λ‹¤λ¦¬κΈ° μ„ν•΄ ν„μ¬ μ‹¤ν–‰ μ¤‘μ΄λ μ‘μ—…μΈ t1μ„ λ€κΈ° μƒνƒλ΅ λ³€κ²½ν•©λ‹λ‹¤.
  - μ΄λ΅ μΈν•΄ CPUλ” λ” μ΄μƒ μ§„ν–‰ μ¤‘μΈ μ‘μ—…μ΄ μ—†κΈ° λ•λ¬Έμ— μ¤€λΉ„ μƒνƒμ— μλ λ‹¤λ¥Έ μ‘μ—…μΈ t2λ¥Ό μ‹¤ν–‰ μƒνƒλ΅ μ „ν™ν•©λ‹λ‹¤.
  - κ·Έ ν›„, μ»¤λ„ λ¨λ“μ—μ„ μ μ € λ¨λ“λ΅ μ „ν™ν•κ² λ©λ‹λ‹¤. (ν„μ¬ CPU μμ› ν†µμ  κ¶ν•μ€ t2μ— μμµλ‹λ‹¤.)
- SSD μΈ΅μ—μ„λ” t1μ΄ νμΌμ„ μ½μ„ μ¤€λΉ„κ°€ λμ—λ‹¤λ” μ •λ³΄λ¥Ό μΈν„°λ½νΈλ¥Ό ν†µν•΄ μ•λ ¤μ¤λ‹λ‹¤.
  - μΈν„°λ½νΈ μ²λ¦¬λ¥Ό μ„ν•΄ μ»¤λ„ λ¨λ“λ΅ μ§„μ…ν•©λ‹λ‹¤.
  - t2μ CPU μƒνƒλ¥Ό μ €μ¥ν•©λ‹λ‹¤.
  - t1μ„ μ¤€λΉ„ μƒνƒλ΅ λ³€κ²½ν•©λ‹λ‹¤.
  - μ΄μ „μ— t2κ°€ μ¤‘λ‹¨λμ—λ μ§€μ λ¶€ν„° λ‹¤μ‹ μ‹μ‘ν•  μ μλ„λ΅ t2μ CPU μƒνƒλ¥Ό λ³µμ›ν•©λ‹λ‹¤.
- (κ°€μ •: λ©€ν‹° μ“°λ λ“ ν™κ²½) t2κ°€ μ£Όμ–΄μ§„ νƒ€μ΄λ¨Έ μ‹κ°„μ΄ λ¨λ‘ μ†μ”λμ–΄ μΈν„°λ½νΈκ°€ λ°μƒν•©λ‹λ‹¤.
  - μ»¤λ„ λ¨λ“λ΅ μ§„μ…ν•©λ‹λ‹¤.
  - t2μ CPU μƒνƒλ¥Ό μ €μ¥ν•κ³ , t2λ” μ¤€λΉ„ μƒνƒλ΅ λ³€κ²½λ©λ‹λ‹¤.
  - t1μ΄ μ‹¤ν–‰ μƒνƒλ΅ μ „ν™λλ©°, νμΌ μ½κΈ° μ‹μ¤ν… νΈμ¶μ„ νΈμ¶ν–μ„ λ• μ €μ¥ν• t1μ CPU μƒνƒκ°€ λ³µμ›λ©λ‹λ‹¤.
  - μ μ € λ¨λ“λ΅ μ „ν™λ©λ‹λ‹¤.
- μ΄μ  λ‹¤μ‹ ν†µμ κ¶μ€ t1μ—κ² λμ•„μµλ‹λ‹¤. νμΌμ„ μ½μ„ μ¤€λΉ„κ°€ μ™„λ£λ t1μ€ μ‹¤μ  μ½μ–΄μ¤λ” μ‘μ—…μ„ κ³„μ† μ§„ν–‰ν•κ² λ©λ‹λ‹¤.

</br>

### λ™μ‹μ— λ‘ κ° μ΄μƒμ μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄, μ–΄λ–»κ² μ²λ¦¬ν•΄μ•Ό ν•λ‚μ”?

- μ—¬λ¬ μ¥μΉμ—μ„ μΈν„°λ½νΈκ°€ λ™μ‹μ— λ°μƒν•κ±°λ‚ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰ μ¤‘ μΈν„°λ½νΈκ°€ λ°μƒν–μ„ κ²½μ° **μ°μ„ μμ„**λ¥Ό λ”°μ Έμ„ μ²λ¦¬ν•©λ‹λ‹¤.
  - **μ „μ› μ΄μƒ(Power fail)**
  - **κΈ°κ³„ μ°©μ¤(Machine Check)**
  - **μ™Έλ¶€ μ‹ νΈ(External) > μ…μ¶λ ¥(I/O)**
  - **λ…λ Ήμ–΄ μλ»**
  - **ν”„λ΅κ·Έλ¨ κ²€μ‚¬(Program Check)**
  - **SVC(SuperVisor Call)**
- μΌλ°μ μΌλ΅ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈκ°€ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ³΄λ‹¤ μ°μ„  μμ„κ°€ λ†’κ³  λ‚΄λ¶€ μΈν„°λ½νΈ λ³΄λ‹¤ μ™Έλ¶€ μΈν„°λ½νΈκ°€ μ°μ„  μμ„κ°€ λ†’μµλ‹λ‹¤. **(ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ > μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ) , (μ™Έλ¶€ μΈν„°λ½νΈ > λ‚΄λ¶€ μΈν„°λ½νΈ)**

</br>

## π“ REFERENCE

- [μ νλΈ - μΈν„°λ½νΈμ™€ μ‹μ¤ν… μ½μ„ μ„¤λ…ν•©λ‹λ‹¤! λ‹Ήμ—°ν μ μ € λ¨λ“, μ»¤λ„ λ¨λ“λ„ μ„¤λ…ν•΄μ•Όκ² μ£ ? κ·Έλ°λ° μ΄ λ¨λ“ κ² ν”„λ΅κ·Έλλ° μ–Έμ–΄μ™€ λ¬΄μ¨ μƒκ΄€μ΄λƒκµ¬μ”?? μƒκ΄€μμ£ ! μ™ μƒκ΄€μλƒλ©΄μ”..!](https://www.youtube.com/watch?v=v30ilCpITnY)
- [Wikipedia - μΈν„°λ½νΈ](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
